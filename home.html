<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TLM home page</title>
  </head>
  <link rel="stylesheet" href="css/bootstrap.min.css" />

  <link rel="stylesheet" href="home.css" />
  <style>
    @media only screen and (max-width: 360px) {
      #cdb{
    top: 70px;
    margin-left: 10px;
    position: fixed;
width: 90%;
  }
      #ul li {
        padding: 0;
        margin-left: 0;
      }
      #side {
        left: 0;
        top: 50px;
        position: fixed;
        width: 400px;
        height: 100%;
        background-color: brown;
        display: none;
      }
      #top {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 50px;
        background-color: aqua;
      }
      #button {
        position: fixed;

        left: 0;
        bottom: 0;
        background-color: green;
        -ms-flex-align: end;
      }
    }
    @media only screen and (max-width: 510px) {
      #crda{
    margin-left: 10px;
    width: 100%;
    z-index: -1;
    top: 100px;
  }
      #cdb{
    top: 70px;
    margin-left: 10px;
    position: fixed;
width: 90%;
  }
      #ul li {
        margin-left: 8%;
      
      }
      #side {
        left: 0;
        top: 50px;
        position: fixed;
        width: 250px;
        height: 100%;
        background-color: brown;
        display: none;
        
      }
      #top {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 50px;
        background-color: aqua;
      }
      #button {
        position: fixed;

        left: 0;
        bottom: 0;
        background-color: green;
        -ms-flex-align: end;
      }
      #ul {
        left: 0;
      }
    }
    @media only screen and (min-width: 510px) {
    #right{
margin-left: 50px;
position: fixed;
    }
      #crd{
        margin-left: 210px;
        top: 75px;
        position: fixed;
        width: 80%;
        margin-right: 20px;

      }
      #crda{
    margin-left: 210px;
    width: 100%;
    z-index: -1;
    top: 70px;
  }
      #cdb{
    top: 70px;
    margin-left: 210px;
    position: fixed;
width: 80%;
  }
      #menu{
        display: none;
      }
      #sul li{
        width: 100px;
        padding-top: 40px;
        margin-left: 10px;
        z-index: 1;
      }
      #ul li {
        margin-left: 15%;

      }
      #side {
        left: 0;
        top: 50px;
        position: fixed;
        width: 250px;
        height: 100%;
        background-color: brown;
      }
      #top {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 50px;
        background-color: aqua;
      }
      #button {
        position: fixed;

        left: 0;
        bottom: 0;
        background-color: green;
        -ms-flex-align: end;
      }
      #ul {
        left: 0;
      }
    }
    #ul li {
      list-style-type: none;

      float: left;
    }
   #sul li:hover{
      background-color: white;
      border-radius: 20px;
      width: 300px;
    }#sidenv {
		width: 25%;

		

		

		position: fixed;

	}

	#cont {

		
		
	}
	#id01 {
	

		
	
	}
	#id01 {
		


	}#crd{
    z-index: -1;
  
  }

	#id01 input {

		
		border: 1px solid black;
	}

	#id01 select {
		

				border: 1px solid black;
	}

	#id01 select {
		

		border: 1px solid black;
	}

	#id01 button {
		
		

		border: 1px solid black;
	}

	#cont a {
		
	}

	#myDropdown a {
		
	}

	#mySidenav a {
		
	}

	#hash {
		justify-content: flex-end;
	}

	#id02 label,input {	
	}

	#id02 input {
	
	}

	#id02 select {
		
	}

	#id02 button {
		

		
	}

	#myDropdown a {
		
	}

	#mySidenav a {
		
	}

	#hash {
	
	}

	#id02 label,input {
			}

	#id02 input {
		
	}

	#id02 select {
		
	}

	#id02 button {
		
	}

	ol li {
		margin-left: 20px;
		justify-content: left;
	}

	.hg:hover {
		border: 6px solid cyan;

		background-color: green;
	}

	.hg {}#homr {
		background-color: gry;
	}#tm{
    margin-left: 40%;
    top:50px;
    position: fixed;
    z-index: 2;

  }.chart-wrapper {
    width: 100%;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

  </style>
  <body>
    <div class="conatainer-sm">
      <div class="row" style="">
        <div class="col-12" id="top">
			<span style="cursor:

			pointer;margin-left:10px" id="menu" onclick="openNav()">â˜°
		</span>



<span id="prog1" onclick="document.getElementById('id02').style.display='block';" style="display:none;color:red;font-size:70px;margin-left:40%">&plus;</span>


<span id="prog"  onclick="document.getElementById('id01').style.display='block';" style="display :none;color:red;font-size:70px;margin-left:40%">&plus;</span>

<span id="prog1"  onclick="document.getElementById('id02').style.display='block';" style="display:none;color:red;margin-left:40%">&plus;</span>


<span id="prog" onclick="document.getElementById('id01').style.display='block';" style="display :none;color:red;margin-left:40%">&plus;</span>



  <span class="card" id="tm" style="width:250px;display :none;margin-left: 40%;">

    <span class="card-body">

      

       <span class=""><span id="h1"></span></span>
    
</span>
  </span>



<div class="dropdowna" style="float:right;z-index:1">


	<img src="m.jpeg" alt="" onclick="myFunctiona()" class="dropbtna" style="width:50px;height:50px;border-radius:50%;" id="img" />

	
<div id="myDropdowna"

		class="dropdown-contenta" style="z-index: 15;">
		<a href="home.html">home</a>
		<a href="wus.html" style="">doc</a>
		<a href="reg/about.html">About us</a>

		<a href="#" onclick="window.open('index.html','_self')">logout</a>
	</div>

	</div>



		</div>
      </div>
      <div class="row">
        <div class="col-2" id="side" style="z-index: 13;">
<ul id="sul">
  <li class="btn shadow-lg" onclick="window.location.reload()">&#127968;&nbsp;home</li><br>
  <li class="btn shadow-lg" onclick="window.open('seting.html','_self')">&#9788;&nbsp;setting</li>
  <li class="btn shadow-lg" onclick="window.open('reg/reg.html','_self')">&plus;&nbsp;register</li>
  <li class="btn shadow-lg" onclick="window.open('subj.html','_self')">&Mscr;&nbsp;mark</li>
  <li class="btn shadow-lg" onclick="window.open('atend/subj.html','_self')">&#128197;&nbsp;attendance</li>
  <li class="btn shadow-lg" onclick="window.open('rank.html','_self')">&#9878;&nbsp;rank</li>
</ul>
<div id="mySidenav" id="sidenv" class="sidenav bg-success " style="font-size:50px">
  <a href="javascript:void(0)"
  class="closebtn"
  onclick="closeNav()" style="font-size:60px;color:red">&times;</a><br><br><br>
  <div class="container-sm bg-white shadow m-4" id="cont" style="width:350px;font-size:70px;margin-top:120px;">
  
  
  <a href="#">home</a>
  <div id="mySidenav" id="sidenv" class="sidenav bg-success " style="">
  <a href="javascript:void(0)"
  class="closebtn"
  onclick="closeNav()" style="color:red">&times;</a><br><br><br>
  <div class="container-sm bg-white shadow m-4" id="cont" style="width:350px;">
  
  
  <a href="" onclick="window.open('home.html','_self')">home</a>
  
  <a onclick="myFunction()"
  class="btn dropbtn bg-primary " style="color:white">Academic </a>
  
  <div id="myDropdown"
  class="dropdown-content">
  
  
  <a href="reg/reg.html" id="a1" onclick="window1()" class="" style="">
  register students </a>
  <a href="subj.html" id="a2" onclick="window2()" class=" " style="">manage mark </a>
  
  <a href="atend/subj.html" id="a3" onclick="window3()" class="">take attendance </a>
  <a href="rank.html" id="a4" onclick="window4()" class=""> ranke students </a>
  
  
  </div>
  </a>
  <a href="seting.html" class="">settings</a>
  <a href="text.html">notebook</a>
  
  <a href="contact.html" style="display:none">contact us</a>
  
  <a href="reg/about.html">About us</a>
  
  <a href="wus.html" style="display:non">docum</a>
  
  </div>
  </div>
  </div>
        </div>
        
        <div class="col-10" id="main" style="width: 100%;height: 100%;position: fixed;z-index: -1;">
         
          <div class="home2 bg-info" id="home2" style="z-index: -1;display:block;margin-left: 200px;top: 60px;position: fixed;overflow: auto;max-height: 90%;max-width: 90%;">

<div class="row" style="z-index: -1;">
  <div class="col-12">
    <div class="chart-wrapper" style="width:100%;height:300px;background-color:black;color:white">
      <div id="line-chart" class="chart" style="color:green"></div>
  </div>
  </div>
</div>
  
      <div class="row" style="background-color: white;">
        
        <div class="col-4" style="background-color: white;">
          <center>
          
        
            
        
        
        
            <svg width="380" height="300" style="background-color: white;margin-left:0">
        
            </svg>
            <span style="background-color:#ffffb3;">total</span>
            <span style="background-color: #bebada;">male</span>
            <span style="background-color:#fb8072;">female</span>
        
          </center>
        
         
        </div>
         <div class="col-4" style="background-color: white;">
          <div class="card">
            <div class="card-body">
         
              <div id="chart" style="width: 300px;height: 100px;background-color: white;" ></div>

        </div></div></div>
        
          
        <div class="col-4" style="background-color: white;">
          <div class="card">
            <div class="card-body">
  
          <div id="charts" style="width: 300px;height: 100px;background-color: white;" ></div>
</div></div>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          hello how are you doing welcome to our 
        </div>
      </div>
    </div>
  </div>
          </div>
          <div class="help" style="display: none;" id="helpd" >
                 <center>
                  <div class="row">
                    <div class="col-12" style="margin-top: 60px;margin-left: 210px;z-index: 1;">
                      <center>
                        <div class="card shadow-lg" style="width:560px;top:60px;padding:20px">
                          <div class="card-header">
                            <span class="btn btn-warning" style="width:100%">what's up?</span>
                          </div>
                          <div class="card-body" style="overflow:auto;max-height:300px;min-height:300px;max-width:500px;outline:2px outset black;border:2px inset black;background-color:white; border-radius:10px ">
                            
                            <div class="row">
                              <!--<div class="col-6">-->
                            <div class="" id="ans" style="align-items: self-end;">
                              
                            </div>
                          
                            </div>
                            <div class="row">
                            
                            <div id="tyev" style="display: none;margin-left: 100px;">
                              <center>
                            <span id="ttext">typing</span>
                             <span id="typ">.</span>
                            <span id="typ1">.</span>
                            <span id="typ2">.</span>
                            </center>
                            </div>
                          <!--</div>-->
                  
                          </div>
                          </div>
                          <div class="card-footer">
                            <form class="" action="" method="get" accept-charset="utf-8" name="helpform">
                              <input type="hidden" name="anser" id="anser">
                              <textarea name="quest" id="inph" rows="2" placeholder="Ansk samething.." style="width:100%"></textarea>
                          <button type="submit" class="btn btn-success " onclick="getanswer()">send</button><button class="btn btn-danger" onclick="removeitem()">reset mesage</button>
                            </form>
                          </div>
                          
                        </div></center>
                    </div>
                  </div>
                 </center>
          </div>
          <div class="container-sm" id="former" style="display :none">
           <center><div class="container-sm shadow p-2">

              <div class="row">
              <div class="card" id="crd" style="z-index: -1;width:80%;overflow-y:auto;max-height:400px;min-height:400px;">
              
              <div class="card-body">
              
              
              <table class="table table-condensed-sm table-striped table-responsive-sm table-sm table-hover bg-white " id="myTable" style="overflow-y:auto;margin-right:20px;max-height:400px;min-height:400px;">
              <!--id="myTable" style="overflow-y:auto;margin-right:20px;max-height:70%;min-height:70%;">
              -->
              
              <thead class="bg-warning">
              <th scope="col" id="no"><input type="text" style="width:40px;display:none" id="noi"> No</th>
              
              <th scope="col" id="fname">date<input type="text" style="width:40px;display:none" id="first"></th>
              <th scope="col">section </th>
              <th scope="col" id="mark1">starttime<input type="text" id="mark1i" style="width: 40px;display: none"></th>
              <th scope="col" id="mark2">
              
              endtime <input type="text" style="width:40px;display:none" id="mark2i">
              </th>
              <th scope="col" id="lname">
              
              program<input type="text" style="width:40px;display:none" id="lnamei">
              </th>
              
              
              <th scope="col">update </th>
              
              
              </thead>
              <tbody>
              
              </tbody>
              
              
              </table>
              </div>
              
              
              </div>
              
              </div>
              
              
              </div></center>
          </div></div></div>
          <div class="righ " id="right" style="display:none;">
            <center><div class="container-sm  p-2">
              <div class="row">
              <div class="card cdb" id="cdb" style="width:80%;max-height:400px;min-height:400px;overflow-y:auto;z-index: -1;">
              
              <div class="container-sm ">
              <div cl="card-header">
              
              
              <span class="btn btn-warning" style="text-decoration:underliine;width:100%;">The Things That You Have To Remember </span>
              <span style="float:right;margin-right:70px;font-size: large;" onclick="document.getElementById('evfrm').style.display='block'" class="btn text-danger">&plus; New</span>
              
              
              </div>
              <div class="card-body">
                <div style="display:none;" id="evfrm">
                  <form class=" " action="" id="event" name="proforme" onsubmit="event.preventDefault();formevent();">
                  <label class="form-label bg-info">Create Events</label>
                  
                  
                  <textarea class="form-control" placeholder="write events you want to remember"style=""name="evtext"></textarea>
                  <button style="width:100%;">save</button>
                  
                  </form>
                  </div>
              <table class="table table-condensed-sm table-striped table-responsive-sm table-sm table-hover bg-white " id="myTablo" style="overflow-y:auto;margin-right:20px;max-height:70%;min-height:70%;width: 80%;">
              
              
              
              <tbody>
              
              </tbody>
              
              
              </table>
              </div>
              </div>
              
              </table>
              
              <br>
              
              
              </div>
              </div>
              </div>
              </div>
              </div>
          </div>
        </center></div>
          
          <div class="center " id="center" style="display:none">
            <center>
            <div class="container-sm  p-2">
              <div class="row">
              
              <div class="card" id="crda" style="z-index: 1;width: 90%;">
              
              <div class="card-body" style="overflow-y: auto;max-height:400px ;">
              
              
              <table class="table table-condensed-sm table-striped table-responsive-sm table-sm table-hover bg-white" id="myTable1" style="overflow:auto;margin-right:20px;max-height:400px;min-height:400px;width: 90%;border-radius: 30px;">
              
              
              <thead class="bg-warning">
              <th scope="col" id="no"><input type="text" style="width:40px;display:none" id="noi"> No</th>
              
              <th scope="col" id="fname">date<input type="text" style="width:40px;display:none" id="first"></th>
              <th scope="col">section </th>
              
              <th scope="col" id="lname">
              
              program<input type="text" style="width:40px;display:none" id="lnamei">
              </th>
              <th scope="col" id="lname">
              
              period <input type="text" style="width:40px;display:none" id="lnamei">
              </th>
              
              <th scope="col">update </th>
              
              
              </thead>
              <tbody>
              
              </tbody>
              
              </table>
              
              
              </div>
              
              </div>
              
              
              </div>
              </div>
            </center>
          
          </div>
          <div id="id01" class="modal container-sm shadow" style="z-index: 13;">


            <form class="modal-content animate" action="" id="form" name="proform" onsubmit="event.preventDefault();form();">
            <div class="imgcontainer">
            <span onclick="document.getElementById('id01').style.display='none'"class="close" title="Close Modal"> &times;</span>
            
            
            </div>
            
            
            <div class="container-sm shadow p-2">
            <p class="bg-success ">
            program form
            </p>
            <label for="wday" class="form-label">choose date</label>
            
            <select id="" name="wday" id="wd" class="form-control">
            <option>monday</option>
            <option>Tuesday </option>
            <option>wensday</option>
            <option>Thursday </option>
            <option>Friday </option>
            <option>Saturday </option>
            <option>sunday</option>
            </select>
            <label for="wday" class="form-label">enter your program</label>
            <input type="text" name="pro" id="pro" placeholder="example:class"value="" class="form-control " />
            <label for="sec" class="form-label">enter section</label>
            <input type="text" name="sec" id="sec" value="" placeholder="example:9A"class="form-control " />
            
            <label for="wday" class="form-label">set start time</label>
            <input type="time" name="time" id="time" value="" class="form-control " />
            <label for="date" class="form-label">set end time</label>
            <input type="time" name="date" id="date" value="" class="form-control " />
            
            <button type="submit" style="width:60%" class="btn btn-primary ">save</button>
            
            </div>
            </form>
            
            
            </div>

            <div id="id02" class="modal container-sm shadow">


              <form class="modal-content animate" action="" id="form" name="proforma" onsubmit="event.preventDefault();forma();">
              <div class="imgcontainer">
              <span onclick="document.getElementById('id02').style.display='none'"class="close" title="Close Modal"> &times;</span>
              
              
              </div>
              
              
              <div class="container-sm shadow p-2">
              <p class="bg-success ">
              program form
              </p>
              <label for="wday" class="form-label">choose date</label>
              
              <select id="" name="wday" id="wd" class="form-control">
              <option>monday</option>
              <option>Tuesday </option>
              <option>wensday</option>
              <option>Thursday </option>
              <option>Friday </option>
              <option>Saturday </option>
              <option>sunday</option>
              </select>
              <label for="wday" class="form-label">enter your program</label>
              <input type="text" name="pro" id="pro" placeholder="example:class"value="" class="form-control " />
              <label for="sec" class="form-label">enter section</label>
              <input type="text" name="sec" id="sec" value="" placeholder="example:9A"class="form-control " />
              
              
              <label for="date" class="form-label"> Nth period</label>
              <input type="number" name="how" id="how" value="" placeholder="example:2 if second period "class="form-control " />
              
              <button type="submit" style="width:60%" class="btn btn-primary ">save</button>
              
              </div>
              </form>
              
              
              </div>
        </div>
      </div>
      <div class="row" style="z-index: 1;" style="position: fixed;height: 40px;">
        <div class="col-12" id="button" style="z-index: 14;">
          <ul id="ul">
            <li
              id="hom2"
              class="btn btn-white"
              style="
               
               
                z-index: 1;
                transition: 1s;
                float: left;
                margin-left: 0px;
                background-color: white;
                
                
              ">
              &#127968;
            </li>

            <li
              id="hom1"
              class="btn btn-info"
              style="float: left; margin-left: 10%">
              &#128197;
            </li>

            <li
              id="pl"
              class="btn btn-info"
              style=" float: left; margin-left: 20%">
              &#x1F5D3;
            </li>
            <li
            id="pp3"
            class="btn btn-info"
            style=" float: right; margin-right: 30px" >
            ?
          </li>
            <li
              id="pp"
              class="btn btn-info"
              style=" float: right; margin-right: 30px">
              &#128394;
            </li>
           
          </ul>
        </div>
      </div>
    </div>
    <script src="js/d3.v7.js"></script>
    <script src="js/d3.v7.min.js"></script>
    <script src="home.js"></script>
    <script type="module">
       const dats = JSON.parse(localStorage.getItem('sreg') || '[]'),
sta0 = JSON.parse(localStorage.getItem('dataArr') || '[]'),
sta1 = JSON.parse(localStorage.getItem('st10') || '[]'),
sta2 = JSON.parse(localStorage.getItem('st2') || '[]'),
sta3 = JSON.parse(localStorage.getItem('st3') || '[]'),
sta4 = JSON.parse(localStorage.getItem('st4') || '[]'),
sta5 = JSON.parse(localStorage.getItem('st5') || '[]'),
sta6 = JSON.parse(localStorage.getItem('st6') || '[]'),
sta7 = JSON.parse(localStorage.getItem('st7') || '[]'),
sta8 = JSON.parse(localStorage.getItem('st8') || '[]'),
sta9 = JSON.parse(localStorage.getItem('st9') || '[]');
var ts0f=[]
var ts1f=[]
var ts2f=[]
var ts3f=[]
var ts4f=[]
var ts5f=[]
var ts6f=[]
var ts7f=[]
var ts8f=[]
var ts9f=[]
sta0.forEach(row=>{
  if(row.gender=="female"){
    ts0f.push(row.firstname)
    
  }
})
sta1.forEach(row=>{
  if(row.gender=="famale"){
    ts1f.push(row.firstname)
    
  }
})
sta2.forEach(row=>{
  if(row.gender=="female"){
    ts2f.push(row.firstname)
    
  }
})
sta3.forEach(row=>{
  if(row.gender=="female"){
    ts3f.push(row.firstname)
    
  }
})
sta4.forEach(row=>{
  if(row.gender=="female"){
    ts4f.push(row.firstname)
    
  }
})
sta5.forEach(row=>{
  if(row.gender=="female"){
    ts5f.push(row.firstname)
    
  }
})
sta6.forEach(row=>{
  if(row.gender=="female"){
    ts6f.push(row.firstname)
    
  }
})
sta7.forEach(row=>{
  if(row.gender=="female"){
    ts7f.push(row.firstname)
    
  }
})
sta8.forEach(row=>{
  if(row.gender=="female"){
    ts8f.push(row.firstname)
    
  }
})
sta9.forEach(row=>{
  if(row.gender=="female"){
    ts9f.push(row.firstname)
    
  }
})
var totalf=parseInt( ts0f.length)+parseInt( ts1f.length)+parseInt( ts2f.length)+parseInt( ts3f.length)+parseInt( ts4f.length)+parseInt( ts5f.length)+parseInt( ts6f.length)+parseInt( ts7f.length)+parseInt( ts8f.length)+parseInt( ts9f.length)

var total=parseInt(sta0.length)+parseInt(sta1.length)+parseInt(sta2.length)+parseInt(sta3.length)+parseInt(sta4.length)+parseInt(sta5.length)+parseInt(sta6.length)+parseInt(sta7.length)+parseInt(sta8.length)+parseInt(sta9.length)
     var male=total-totalf; 
var data = [total, totalf, male];



// Selecting SVG using d3.select()

var svg = d3.select("svg");



// Creating Pie generator

var pie = d3.pie();



// Creating arc

var arc = d3.arc()

.innerRadius(0)

.outerRadius(100);



let g = svg.append("g")

.attr("transform", "translate(150,120)");



// Grouping different arcs

var arcs = g.selectAll("arc")

.data(pie(data))

.enter()

.append("g");



// Appending path

arcs.append("path")

.attr("fill", (data, i)=> {

  let value = data.data;

  return d3.schemeSet3[i+1];

})

.attr("d", arc);



// Adding data to each arc

arcs.append("text")

.attr("transform", (d)=> {

  return "translate("+

  arc.centroid(d) + ")";

})

.text(function(d) {

  return d.data;
 
});

    </script>
    <script type="module">
    const dat = JSON.parse(localStorage.getItem('sreg') || '[]'),
dataArr = JSON.parse(localStorage.getItem('dataArr') || '[]'),
st10 = JSON.parse(localStorage.getItem('st10') || '[]'),
st2 = JSON.parse(localStorage.getItem('st2') || '[]'),
st3 = JSON.parse(localStorage.getItem('st3') || '[]'),
st4 = JSON.parse(localStorage.getItem('st4') || '[]'),
st5 = JSON.parse(localStorage.getItem('st5') || '[]'),
st6 = JSON.parse(localStorage.getItem('st6') || '[]'),
st7 = JSON.parse(localStorage.getItem('st7') || '[]'),
st8 = JSON.parse(localStorage.getItem('st8') || '[]'),
st9 = JSON.parse(localStorage.getItem('st9') || '[]');
var color = "steelblue";

// Generate a 1000 data points using normal distribution with mean=20, deviation=5
var values = d3.range(1000).map(d3.random.normal(20, 5));

// A formatter for counts.
var formatCount = d3.format(",.0f");

var margin = {top: 20, right: 30, bottom: 30, left: 30},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var max = d3.max(values);
var min = d3.min(values);
var x = d3.scale.linear()
      .domain([min, max])
      .range([0, width]);

// Generate a histogram using twenty uniformly-spaced bins.
var data = d3.layout.histogram()
    .bins(x.ticks(20))
    (values);

var yMax = d3.max(data, function(d){return d.length});
var yMin = d3.min(data, function(d){return d.length});
var colorScale = d3.scale.linear()
            .domain([yMin, yMax])
            .range([d3.rgb(color).brighter(), d3.rgb(color).darker()]);

var y = d3.scale.linear()
    .domain([0, yMax])
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var bar = svg.selectAll(".bar")
    .data(data)
  .enter().append("g")
    .attr("class", "bar")
    .attr("transform", function(d) { return "translate(" + x(d.x) + "," + y(d.y) + ")"; });

bar.append("rect")
    .attr("x", 1)
    .attr("width", (x(data[0].dx) - x(0)) - 1)
    .attr("height", function(d) { return height - y(d.y); })
    .attr("fill", function(d) { return colorScale(d.y) });

bar.append("text")
    .attr("dy", ".75em")
    .attr("y", -12)
    .attr("x", (x(data[0].dx) - x(0)) / 2)
    .attr("text-anchor", "middle")
    .text(function(d) { return formatCount(d.y); });

svg.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);

/*
* Adding refresh method to reload new data
*/
function refresh(values){
  // var values = d3.range(1000).map(d3.random.normal(20, 5));
  var data = d3.layout.histogram()
    .bins(x.ticks(20))
    (values);

  // Reset y domain using new data
  var yMax = d3.max(data, function(d){return d.length});
  var yMin = d3.min(data, function(d){return d.length});
  y.domain([0, yMax]);
  var colorScale = d3.scale.linear()
              .domain([yMin, yMax])
              .range([d3.rgb(color).brighter(), d3.rgb(color).darker()]);

  var bar = svg.selectAll(".bar").data(data);

  // Remove object with data
  bar.exit().remove();

  bar.transition()
    .duration(1000)
    .attr("transform", function(d) { return "translate(" + x(d.x) + "," + y(d.y) + ")"; });

  bar.select("rect")
      .transition()
      .duration(1000)
      .attr("height", function(d) { return height - y(d.y); })
      .attr("fill", function(d) { return colorScale(d.y) });

  bar.select("text")
      .transition()
      .duration(1000)
      .text(function(d) { return formatCount(d.y); });

}

// Calling refresh repeatedly.
setInterval(function() {
  var values = d3.range(1000).map(d3.random.normal(20, 5));
  refresh(values);
}, 2000);

    </script>
    <script type="module">
      const data = [30, 10, 50, 20];
     const labels = ['1992', '1993', '1994', '1995'];
     
     
     const max_bar_width = 100;
     
     
     const svg_height = 300;
     
     
     const bar_color = "#FFCB65";
     
    
     const top_offset = 50;
     const bottom_offset = 50;
     
     
     function shadeColor(color, percent) {

         var R = parseInt(color.substring(1,3),16);
         var G = parseInt(color.substring(3,5),16);
         var B = parseInt(color.substring(5,7),16);
     
         R = parseInt(R * (100 + percent) / 100);
         G = parseInt(G * (100 + percent) / 100);
         B = parseInt(B * (100 + percent) / 100);
     
         R = (R<255)?R:255;  
         G = (G<255)?G:255;  
         B = (B<255)?B:255;  
     
         var RR = ((R.toString(16).length==1)?"0"+R.toString(16):R.toString(16));
         var GG = ((G.toString(16).length==1)?"0"+G.toString(16):G.toString(16));
         var BB = ((B.toString(16).length==1)?"0"+B.toString(16):B.toString(16));
     
         return "#"+RR+GG+BB;
     }
       
     // append svg
     const svg = d3.select("#charts")
       .append("svg")
       .attr("fill", "red")
       .attr("width", '100%')
       .attr("height", svg_height);
     
     // to make graph responsive calcuate we set width 100%
     // here we calculate width in pixels
     const svg_width = svg.node().getBoundingClientRect().width;
     
     // decide bar width depending upon available space and no. of bars to plot
     let bar_width = Math.round((svg_width - 60) / data.length);
     if (bar_width > max_bar_width) {
       bar_width = max_bar_width;
     }
     
     // spacing between two bars
     // instead of having a fixed value we set it dynamically
     const spacing = 0.15 * bar_width;
     
     // to center align graph we move it from left to right
     // this is applicable if there's any space left
     let left_offset = Math.round((svg_width - bar_width*data.length)/2);
     if (left_offset < 0) {
       left_offset = 0;
     }
     
     // create scale
     const scale = d3.scaleLinear()
       .domain([0, Math.max(...data)])
       .range([0, svg_height - top_offset - bottom_offset]);
     
     // create scale for Y-Axis
     // we could have used scale above but for Y-Axis we need domain reversed
     const scale_y_axis = d3.scaleLinear()
       .domain([Math.max(...data), 0])
       .range([0, svg_height - top_offset - bottom_offset]);
     
     // create tooltip element  
     const tooltip = d3.select("body")
       .append("div")
       .attr("class","d3-tooltip")
       .style("position", "absolute")
       .style("z-index", "10")
       .style("visibility", "hidden")
       .style("padding", "15px")
       .style("background", "rgba(0.6,0,0,0.6)")
       .style("z-index","1")
       .style("border-radius", "5px")
       .style("color", "#fff")
       .text("a simple tooltip");
     
     // append rect
     const rect = svg.selectAll("g")
       .data(data)
       .enter()
       .append("rect")
       .attr("fill", bar_color)
       .attr("x", (d, i) => left_offset + bar_width * i)
       .attr("y", d => svg_height - bottom_offset)
       .attr("width", bar_width - spacing)
       .on("mouseover", function(d, i) {
         tooltip.html(`Data: ${d}`).style("visibility", "visible");
         d3.select(this)
           .attr("fill", shadeColor(bar_color, -15));
       })
       .on("mousemove", function(){
         tooltip
           .style("top", (event.pageY-10)+"px")
           .style("left",(event.pageX+10)+"px");
       })
       .on("mouseout", function() {
         tooltip.html(``).style("visibility", "hidden");
         d3.select(this).attr("fill", bar_color);
       });
     
     // append text  
     svg.selectAll("g")
       .data(data)
       .enter()
       .append("text")
       .attr("dominant-baseline", "text-before-edge")
       .attr("text-anchor", "middle")
       .attr("fill", "#000000")
       .attr("x", (d, i) => left_offset + bar_width * i + bar_width/2 - spacing/2)
       .attr("y", svg_height - bottom_offset + 5)
       .attr("style", "font-family:Verdana")
       .text((d, i) => labels[i]);
     
     // append X-Axis  
     svg.append("line")
       .attr("stroke", "#000000")
       .attr("stroke-width", 2)
       .attr("x1", left_offset)
       .attr("y1", svg_height - bottom_offset)
       .attr("x2", bar_width * data.length + left_offset - spacing)
       .attr("y2", svg_height - bottom_offset);
       
     // appen Y-Axis        
     svg.append("g")
       .attr("transform", "translate(0," + top_offset + ")")
       .call(d3.axisRight(scale_y_axis));
       
     window.onload = () => {
       // set animation
       rect.transition()
           .ease(d3.easeLinear)
           .duration(1000)
           .attr("y", d => svg_height - bottom_offset - scale(d))
           .attr("height", d => scale(d));
     };
   </script>
   <script type="module">
const lineData = [{
    values: [
        {date: "2020/01/01", total: 230},
        {date: "2020/02/01", total: 290},
        {date: "2020/03/01", total: 230},
        {date: "2020/04/01", total: 270},
        {date: "2020/05/01", total: 244},
        {date: "2020/06/01", total: 270},
        {date: "2020/07/01", total: 320},
        {date: "2020/08/01", total: 320},
        {date: "2020/09/01", total: 250},
        {date: "2020/10/01", total: 272},
    ]
}]

    const element = document.getElementById('line-chart');

// Setting dimensions
const margin = {top: 40, right: 30, bottom: 7, left: 20},
    width = 900 - margin.left - margin.right,
    height = 300 - margin.top - margin.bottom;

// Parsing timestamps
const parseTime = d3.timeParse('%Y/%m/%d');

const parsedData = lineData.map(item => (
    {
        values: item.values.map((val) => ({
            total: val.total,
            date: parseTime(val.date)
        }))
    }));

// Appending svg to a selected element
const svg = d3.select(element)
    .append('svg')
    .attr('width', width + margin.left + margin.right)
    .attr('height', 300 + margin.top + margin.bottom)
    .attr("viewBox", `0 40 ${width + 80} ${height}`)
    .append('g')
    .attr('transform', `translate(${margin.left}, ${margin.top})`);

// Setting X,Y scale ranges
const xScale = d3.scaleTime()
    .domain([
        d3.min(parsedData, (d) => d3.min(d.values, (v) => v.date)),
        d3.max(parsedData, (d) => d3.max(d.values, (v) => v.date))
    ])
    .range([0, width]);

const yScale = d3.scaleLinear()
    .domain([
        d3.min(parsedData, (d) => d3.min(d.values, (v) => v.total)),
        d3.max(parsedData, (d) => d3.max(d.values, (v) => v.total))
    ])
    .range([height, 0]);

const chartSvg = svg.selectAll('.line')
    .data(parsedData)
    .enter();

// Drawing line with inner gradient and area
// Adding functionality to make line and area curved
const line = d3.line()
    .x(function(d) {
        return xScale(d.date);
    })
    .y(function(d) {
        return yScale(d.total);
    })
    .curve(d3.curveCatmullRom.alpha(0.5));

// Defining the area, which appear after animation ends
const area = d3.area()
    .x(function(d) { return xScale(d.date); })
    .y0(height)
    .y1(function(d) { return yScale(d.total); })
    .curve(d3.curveCatmullRom.alpha(0.5));

// Defining the line path and adding some styles
const path = chartSvg.append('path')
    .attr('d', function(d) {
        return line(d.values)
    })
    .attr('stroke-width', '2')
    .style('fill', 'none')
    .attr('stroke', '#ff6f3c');

// Drawing animated area
chartSvg.append("path")
    .attr("d", function(d) {
        return area(d.values)
    })
    .style('fill', 'rgba(255,111,60,0.15)')

// Adding the x Axis
svg.append("g")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(xScale));

// Adding the y Axis
svg.append("g")
    .call(d3.axisLeft(yScale));
    const zeroArea = d3.area()
    .x(function(d) { return xScale(d.date); })
    .y0(height)
    .y1(function() { return 0; })
    .curve(d3.curveCatmullRom.alpha(0.5));
    chartSvg.append("path")
    .attr("d", function(d) {
        return zeroArea(d.values)
    })
    .style('fill', 'rgba(255,111,60,0.15)')
    .transition()
    .duration(1500)
    .attr("d", function(d) {
        return area(d.values)
    })
    .style('fill', 'rgba(255,111,60,0.15)');
    const length = path.node().getTotalLength(); //
    path.attr("stroke-dasharray", length + " " + length)
    .attr("stroke-dashoffset", length)
    .transition()
    .ease(d3.easeLinear)
    .attr("stroke-dashoffset", 0)
    .delay(1500)
    .duration(3000)

</script>
   </script>
  </body>
</html>
